<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Routing with GTFS (General Transit Feed Specification)
    Data • gtfsrouter</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Routing with GTFS (General Transit Feed Specification)
    Data">
<meta property="og:description" content="Use GTFS (General Transit Feed Specification) data
    for routing from nominated start and end stations, and for extracting
    isochrones from nominated start station.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">gtfsrouter</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.1.019</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">Home</a>
</li>
<li>
  <a href="articles/index.html">Vignettes</a>
</li>
<li>
  <a href="reference/index.html">Functions</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/ATFutures/gtfs-router">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">


<div id="gtfs-router" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#gtfs-router" class="anchor"></a>GTFS Router</h1></div>
<p><strong>R</strong> package for routing with <a href="https://developers.google.com/transit/gtfs/">GTFS (General Transit Feed Specification)</a> data. See <a href="https://atfutures.github.io/gtfs-router/">the website</a> for full details.</p>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<p>To install:</p>
<div class="sourceCode" id="cb1"><pre class="r"><span class="kw pkg">remotes</span><span class="kw ns">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html">install_github</a></span>(<span class="st">"atfutures/gtfs-router"</span>)</pre></div>
<p>To load the package and check the version:</p>
<div class="sourceCode" id="cb2"><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">gtfsrouter</span>)
<span class="fu"><a href="https://rdrr.io/r/utils/packageDescription.html">packageVersion</a></span>(<span class="st">"gtfsrouter"</span>)</pre></div>
<div class="sourceCode" id="cb3"><pre class="sourceCode R"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1">## [1] '0.0.1.3'</a></code></pre></div>
</div>
<div id="main-functions" class="section level2">
<h2 class="hasAnchor">
<a href="#main-functions" class="anchor"></a>Main functions</h2>
<p>The main functions can be demonstrated with sample data included with the package from Berlin (the Verkehrverbund Berlin Brandenburg, or VBB). GTFS data are always stored as <code>.zip</code> files, and these sample data can be written to local storage with the function <code><a href="reference/berlin_gtfs_to_zip.html">berlin_gtfs_to_zip()</a></code>.</p>
<div class="sourceCode" id="cb4"><pre class="r"><span class="fu"><a href="reference/berlin_gtfs_to_zip.html">berlin_gtfs_to_zip</a></span>()
<span class="no">tempfiles</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.files.html">list.files</a></span> (<span class="fu"><a href="https://rdrr.io/r/base/tempfile.html">tempdir</a></span> (), <span class="kw">full.names</span> <span class="kw">=</span> <span class="fl">TRUE</span>)
<span class="no">filename</span> <span class="kw">&lt;-</span> <span class="no">tempfiles</span> [<span class="fu"><a href="https://rdrr.io/r/base/grep.html">grep</a></span> (<span class="st">"vbb.zip"</span>, <span class="no">tempfiles</span>)]
<span class="no">filename</span></pre></div>
<div class="sourceCode" id="cb5"><pre class="sourceCode R"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1">## [1] "/tmp/RtmpDvCd60/vbb.zip"</a></code></pre></div>
<p>For normal package use, <code>filename</code> will specify the name of the local GTFS data stored as a single <code>.zip</code> file.</p>
<div id="gtfs_route" class="section level3">
<h3 class="hasAnchor">
<a href="#gtfs_route" class="anchor"></a>gtfs_route</h3>
<p>Given the name of a GTFS <code>.zip</code> file, <code>filename</code>, routing is as simple as the following code:</p>
<div class="sourceCode" id="cb6"><pre class="r"><span class="no">gtfs</span> <span class="kw">&lt;-</span> <span class="fu"><a href="reference/extract_gtfs.html">extract_gtfs</a></span> (<span class="no">filename</span>)
<span class="no">gtfs</span> <span class="kw">&lt;-</span> <span class="fu"><a href="reference/gtfs_timetable.html">gtfs_timetable</a></span> (<span class="no">gtfs</span>) <span class="co"># A pre-processing step to speed up queries</span>
<span class="fu"><a href="reference/gtfs_route.html">gtfs_route</a></span> (<span class="no">gtfs</span>,
            <span class="kw">from</span> <span class="kw">=</span> <span class="st">"Schonlein"</span>,
            <span class="kw">to</span> <span class="kw">=</span> <span class="st">"Berlin Hauptbahnhof"</span>,
            <span class="kw">start_time</span> <span class="kw">=</span> <span class="fl">12</span> * <span class="fl">3600</span> + <span class="fl">120</span>) <span class="co"># 12:02 in seconds</span></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">route_name</th>
<th align="left">trip_name</th>
<th align="left">stop_name</th>
<th align="left">arrival_time</th>
<th align="left">departure_time</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">U8</td>
<td align="left">U Paracelsus-Bad</td>
<td align="left">U Schonleinstr. (Berlin)</td>
<td align="left">12:04:00</td>
<td align="left">12:04:00</td>
</tr>
<tr class="even">
<td align="left">U8</td>
<td align="left">U Paracelsus-Bad</td>
<td align="left">U Kottbusser Tor (Berlin)</td>
<td align="left">12:06:00</td>
<td align="left">12:06:00</td>
</tr>
<tr class="odd">
<td align="left">U8</td>
<td align="left">U Paracelsus-Bad</td>
<td align="left">U Moritzplatz (Berlin)</td>
<td align="left">12:08:00</td>
<td align="left">12:08:00</td>
</tr>
<tr class="even">
<td align="left">U8</td>
<td align="left">U Paracelsus-Bad</td>
<td align="left">U Heinrich-Heine-Str. (Berlin)</td>
<td align="left">12:09:30</td>
<td align="left">12:09:30</td>
</tr>
<tr class="odd">
<td align="left">U8</td>
<td align="left">U Paracelsus-Bad</td>
<td align="left">S+U Jannowitzbrucke (Berlin)</td>
<td align="left">12:10:30</td>
<td align="left">12:10:30</td>
</tr>
<tr class="even">
<td align="left">S5</td>
<td align="left">S Westkreuz</td>
<td align="left">S+U Jannowitzbrucke (Berlin)</td>
<td align="left">12:15:24</td>
<td align="left">12:15:54</td>
</tr>
<tr class="odd">
<td align="left">S5</td>
<td align="left">S Westkreuz</td>
<td align="left">S+U Alexanderplatz Bhf (Berlin)</td>
<td align="left">12:17:24</td>
<td align="left">12:18:12</td>
</tr>
<tr class="even">
<td align="left">S5</td>
<td align="left">S Westkreuz</td>
<td align="left">S Hackescher Markt (Berlin)</td>
<td align="left">12:19:24</td>
<td align="left">12:19:54</td>
</tr>
<tr class="odd">
<td align="left">S5</td>
<td align="left">S Westkreuz</td>
<td align="left">S+U Friedrichstr. Bhf (Berlin)</td>
<td align="left">12:21:24</td>
<td align="left">12:22:12</td>
</tr>
<tr class="even">
<td align="left">S5</td>
<td align="left">S Westkreuz</td>
<td align="left">S+U Berlin Hauptbahnhof</td>
<td align="left">12:24:06</td>
<td align="left">12:24:42</td>
</tr>
</tbody>
</table>
</div>
<div id="gtfs_isochrone" class="section level3">
<h3 class="hasAnchor">
<a href="#gtfs_isochrone" class="anchor"></a>gtfs_isochrone</h3>
<p>Isochrones from a nominated station - lines delineating the range reachable within a given time - can be extracted with the <code><a href="reference/gtfs_isochrone.html">gtfs_isochrone()</a></code> function, which returns a list of all stations reachable within the specified time period from the nominated station.</p>
<div class="sourceCode" id="cb7"><pre class="r"><span class="no">gtfs</span> <span class="kw">&lt;-</span> <span class="fu"><a href="reference/extract_gtfs.html">extract_gtfs</a></span> (<span class="no">filename</span>)
<span class="no">gtfs</span> <span class="kw">&lt;-</span> <span class="fu"><a href="reference/gtfs_timetable.html">gtfs_timetable</a></span> (<span class="no">gtfs</span>) <span class="co"># A pre-processing step to speed up queries</span>
<span class="no">x</span> <span class="kw">&lt;-</span> <span class="fu"><a href="reference/gtfs_isochrone.html">gtfs_isochrone</a></span> (<span class="no">gtfs</span>,
                     <span class="kw">from</span> <span class="kw">=</span> <span class="st">"Schonlein"</span>,
                     <span class="kw">start_time</span> <span class="kw">=</span> <span class="fl">12</span> * <span class="fl">3600</span> + <span class="fl">120</span>,
                     <span class="kw">end_time</span> <span class="kw">=</span> <span class="fl">12</span> * <span class="fl">3600</span> + <span class="fl">720</span>) <span class="co"># 10 minutes later</span></pre></div>
<p>The function returns an object of class <code>gtfs_isochrone</code> containing <a href="https://github.com/r-spatial/sf"><code>sf</code></a>-formatted sets of start and end points, along with all intermediate (“mid”) points, and routes. An additional item contains the non-convex (alpha) hull enclosing the routed points. This requires the packages <a href="https://github.com/hypertidy/geodist"><code>geodist</code></a>, <a href="https://cran.r-project.org/package=sf"><code>sf</code></a>, <a href="https://cran.r-project.org/package=alphahull"><code>alphahull</code></a>, and <a href="https://cran.r-project.org/package=mapview"><code>mapview</code></a> to be installed. Isochrone objects have their own plot method:</p>
<div class="sourceCode" id="cb8"><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/plot.html">plot</a></span> (<span class="no">x</span>)</pre></div>
<p><img src="./vignettes/isochrone.png"></p>
<p>The isochrone hull also quantifies its total area and width-to-length ratio.</p>
</div>
</div>
<div id="additional-functionality" class="section level2">
<h2 class="hasAnchor">
<a href="#additional-functionality" class="anchor"></a>Additional Functionality</h2>
<p>There are many ways to construct GTFS feeds. For background information, see <a href="http://gtfs.org"><code>gtfs.org</code></a>, and particularly their <a href="https://docs.google.com/document/d/16inL5BVcM1aU-_DcFJay_tC6Ni0wPa0nvQEstueG5k4/edit">GTFS Examples</a>.</p>
<p>Feeds may include a “frequencies.txt” table which defines “service periods”, and overrides any schedule information during the specified times. The <code>gtfsrouter</code> package includes a function, <a href="https://atfutures.github.io/gtfs-router/reference/frequencies_to_stop_times.html"><code><a href="reference/frequencies_to_stop_times.html">frequencies_to_stop_times()</a></code></a>, to convert “frequencies.txt” tables to equivalent “stop_times.txt” entries, to enable the feed to be used for routine.</p>
<p>Feeds may also omit a “transfers.txt” table which otherwise defines transfer abilities and times between different services. Feeds without this table can generally not be used for routing, and they exclude the possibility of transferring between multiple services. The <code>gtfsrouter</code> package also includes a function, <a href="https://atfutures.github.io/gtfs-router/reference/gtfs_transfer_table.html"><code><a href="reference/gtfs_transfer_table.html">gtfs_transfer_table()</a></code></a>, which can calculate a transfer table for a given feed, with transfer times calculated either using straight-line distances (the default), or using more realistic times routed through the underlying street network.</p>
</div>
</div>

  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Download from CRAN at <br><a href="https://cloud.r-project.org/package=gtfsrouter">https://​cloud.r-project.org/​package=gtfsrouter</a>
</li>
<li>Browse source code at <br><a href="https://github.com/ATFutures/gtfs-router/">https://​github.com/​ATFutures/​gtfs-router/​</a>
</li>
<li>Report a bug at <br><a href="https://github.com/ATFutures/gtfs-router/issues">https://​github.com/​ATFutures/​gtfs-router/​issues</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Mark Padgham <br><small class="roles"> Author, maintainer </small>  </li>
<li>Marcin Stepniak <br><small class="roles"> Author </small> <a href="https://orcid.org/0000-0002-6489-5443" target="orcid.widget" aria-label="ORCID"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li><a href="authors.html">All authors...</a></li>
</ul>
</div>

  <div class="dev-status">
<h2>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/atfutures/gtfs-router/actions?query=workflow%3AR-CMD-check"><img src="https://github.com/atfutures/gtfs-router/workflows/R-CMD-check/badge.svg" alt="R build status"></a></li>
<li><a href="https://travis-ci.org/ATFutures/gtfs-router"><img src="https://travis-ci.org/ATFutures/gtfs-router.svg" alt="Build Status"></a></li>
<li><a href="https://codecov.io/gh/ATFutures/gtfs-router"><img src="https://codecov.io/gh/ATFutures/gtfs-router/branch/master/graph/badge.svg" alt="codecov"></a></li>
<li><a href="http://www.repostatus.org/#active"><img src="http://www.repostatus.org/badges/latest/active.svg" alt="Project Status: Active"></a></li>
<li><a href="https://cran.r-project.org/package=gtfsrouter"><img src="http://www.r-pkg.org/badges/version/gtfsrouter" alt="CRAN_Status_Badge"></a></li>
<li><a href="https://cran.r-project.org/package=gtfsrouter"><img src="http://cranlogs.r-pkg.org/badges/grand-total/gtfsrouter?color=orange" alt="CRAN Downloads"></a></li>
</ul>
</div>
</div>
</div>


      <footer><div class="copyright">
  <p>Developed by Mark Padgham, Marcin Stepniak.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
